<div class="notification-bell-container">
  <button
    class="notification-bell"
    (click)="toggleNotifications()"
    [attr.aria-label]="'Notifications'"
  >
    <span class="material-icons">{{ unreadCount() > 0 ? 'notifications_active' : 'notifications' }}</span>
    @if (unreadCount() > 0) {
      <span class="notification-badge">{{ formatCount(unreadCount()) }}</span>
    }
  </button>

  @if (isOpen()) {
    <div class="notification-dropdown">
      <div class="notification-header">
        <h3>Notifications</h3>
        @if (unreadCount() > 0) {
          <button class="mark-all-read" (click)="markAllAsRead()">
            Mark all as read
          </button>
        }
      </div>

      <div class="notification-list">
        @if (notifications().length > 0) {
          @for (notification of notifications(); track notification.id) {
            <app-notification-item
              [notification]="notification"
              (click)="handleNotificationClick(notification)"
            ></app-notification-item>
          }
        } @else {
          <div class="empty-notifications">
            <span class="material-icons">notifications_none</span>
            <p>No notifications yet</p>
          </div>
        }
      </div>

      <div class="notification-footer">
        <a routerLink="/notifications" class="view-all" (click)="close()">View all notifications</a>
      </div>
    </div>
  }
</div>